---
applyTo: "git-*"
---

`git-*` で始まるファイルを **サブコマンド** として定義します。

## ファイル名

git からの補完を効かせるために、サブコマンドとして提供するすべてのスクリプトは `git-*` の命名ルールに従っています。
いずれも拡張子は付けません。

## 実行権限

新規コマンドファイルを作成した場合、実行権限を付与してください。

## ファイルの先頭

以下の内容を固定で記述します

```bash
#!/bin/bash

# git <subcommand>
#   <description>

# completion: _<completion-func>
# alias: <alias>: _<completion-func>

set -euo pipefail

DIR=$(cd $(dirname ${BASH_SOURCE}); pwd)
. "$DIR/common.sh"

.... ここから個別の処理を書き始める
```

### shebang

`/bin/bash` で固定です。

### サブコマンド名

ファイル名と異なり、サブコマンド名は `git <subcommand>` という形式で記述します。

### 補完関数

サブコマンド以降の引数を補完したい場合、 `completion` に続いて補完関数を指定します。

```bash
例: _git_branch を指定する場合
(_git_branchはgitのbash completionで提供される、ローカルブランチ名を補完する関数)

# completion: _git_branch
```

### エイリアス名

エイリアス名を提供する場合、`alias` に続けてエイリアス名を指定し、さらに補完関数を指定します。

```bash
例: サブコマンドのエイリアスとして lb を割り当て、さらに _git_branch の補完を指定

# alias: lb: _git_branch
```

### オプション

オプションは一部を除外することも可能ですが、その場合はコメントで理由を記載します。

### DIR 変数

`DIR` の名称でサブコマンドのルートディレクトリを指定します。

### 共通スクリプト

ルートディレクトリにある `common.sh` はサブコマンド共通の処理を定義しています。
各サブコマンドは必ず common.sh を読み込みます。

### コードスタイル

- シェルスクリプトのベストプラクティスに従う
- 複雑なロジックにはコメントを追加する
- 一貫したインデント（シェルスクリプトでは4スペース）を使用する

## fzf

一部の機能はインタラクティブな選択肢を fzf を用いて提供します。
fzf を使うサブコマンドでは必ず `require_fzf` を呼び出してください。
